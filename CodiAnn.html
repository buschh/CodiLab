<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CodiAnn | CodiLab</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../HKIKoeln/SemToNotes/client/res/xrx.css" rel="stylesheet">
  <script type="text/javascript" src="../../HKIKoeln/SemToNotes/client/lib/jssaxparser/SAXException.js"></script>
  <script type="text/javascript" src="../../HKIKoeln/SemToNotes/client/lib/jssaxparser/AttributesImpl.js"></script>
  <script type="text/javascript" src="../../HKIKoeln/SemToNotes/client/lib/jssaxparser/LocatorImpls.js"></script>
  <script type="text/javascript" src="../../HKIKoeln/SemToNotes/client/lib/jssaxparser/NamespaceSupport.js"></script>
  <script type="text/javascript" src="../../HKIKoeln/SemToNotes/client/lib/jssaxparser/sax.js"></script>
  <script type="text/javascript" src="../../HKIKoeln/SemToNotes/client/lib/jssaxparser/DefaultHandlers.js"></script>
  <script src="../../HKIKoeln/SemToNotes/client/lib/closure-library/closure/goog/base.js"></script>
  <script src="./client/deps.js"></script>
  <script>
    goog.require('xrx');
  </script>
  <style>
body {
padding-top: 50px;
padding-bottom: 20px;
}

.manual-annotation {
border-style: solid;
border-color: #ff0000;
border-width: 5px;
}

.automatic-annotation {
border-style: solid;
border-color: #0000ff;
border-width: 2px;
}

.xrx-shape-vertex-dragger {
}

.xrx-canvas {
border: 1px solid rgb(240,240,240);
}
  </style>
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body>
  <!-- model -->

  <!--**
   * XML Namespaces
   *-->
  <div class="xrx-namespace" data-prefix="mets" data-uri="http://www.loc.gov/METS/"></div>
  <div class="xrx-namespace" data-prefix="xlink" data-uri="http://www.w3.org/1999/xlink"></div>
  <div class="xrx-namespace" data-prefix="svg" data-uri="http://www.w3.org/2000/svg"></div>
  <div class="xrx-namespace" data-prefix="rdf" data-uri="http://www.w3.org/1999/02/22-rdf-syntax-ns#"></div>
  <div class="xrx-namespace" data-prefix="oa" data-uri="http://www.w3.org/ns/oa#"></div>



  <!--**
   * CodiAnn model
   *-->
  <div class="xrx-instance" id="icodiann">
    <div class="xrx-document">
      <app>
        <imagepos>11</imagepos>
      </app>
    </div>
  </div>

  <div class="xrx-calculate"                id="ccurrentDateTime"
       data-ref="current-dateTime()"></div>

  <div class="xrx-calculate"                id="cuuid"
       data-ref="concat('http://www.ecodicology.org/Anno/', util:uuid())"></div>

  <div class="xrx-bind"                id="buri"
       data-ref="request:uri()"></div>

  <div class="xrx-bind"                id="bappActualImage"
       data-ref="xrx:instance('icodiann')/app/imagepos/text()"></div>

  <div class="xrx-bind"                id="bappImagePos"
       data-ref="number(xrx:instance('icodiann')/app/imagepos/text())"></div>

  <div class="xrx-bind"                id="bappNextImage"
       data-ref="xrx:bind('bappImagePos') + 1"></div>

  <div class="xrx-bind"                id="bappPreviousImage"
       data-ref="xrx:bind('bappImagePos') - 1"></div>



  <!--**
   * METS model
   *-->
  <div class="xrx-instance"            id="imets"
       data-resource="./data/T0152/T0152.mets.xml"></div>

  <div class="xrx-bind"                id="bmetsFiles"
       data-ref="xrx:instance('imets')/mets:mets/mets:fileSec[1]/mets:fileGrp[1]/mets:file"></div>

  <div class="xrx-bind"                id="bmetsActualFile"
       data-ref="xrx:instance('imets')/mets:mets/mets:fileSec[1]/mets:fileGrp[1]/mets:file[xrx:bind('bappImagePos')]"></div>

  <div class="xrx-bind"                id="bmetsActualImageUrl"
       data-ref="xrx:bind('bmetsActualFile')/mets:FLocat/@xlink:href"></div>

  <div class="xrx-bind"                id="bmetsActualImageId"
       data-ref="substring-before(xrx:bind('bmetsActualFile')/@ID, '-DEF')"></div>

  <div class="xrx-optgroup"            id="ometsFiles"
       data-bind="bmetsFiles">
    <div class="xrx-option"
         data-value="count(./preceding-sibling::*) + 1"
         data-label="substring-before(./@ID, '-DEF')">
    </div>
  </div>



  <!--**
   * Swati model
   *-->
  <div class="xrx-instance"            id="iswati"
       data-resource="./data/T0152/T0152.swati.xml"></div>

  <div class="xrx-bind"                id="bswatiZone"
       data-ref="xrx:instance('iswati')/SwatiXml/Page_Measure[./ImageID=xrx:bind('bmetsActualImageId')]/zone"></div>



  <!--*
   * Shared Canvas model
   *-->
  <!-- target model -->
  <div class="xrx-instance"            id="isc"
       data-resource="./data/T0152/T0152.sc.xml"></div>

  <div class="xrx-bind"                id="bsc"
       data-ref="xrx:instance('isc')/*"></div>

  <div class="xrx-bind"                id="bscRectangles"
       data-ref="xrx:instance('isc')//svg:rect"></div>

  <div class="xrx-bind"                id="bscPolygons"
       data-ref="xrx:instance('isc')//svg:polygon"></div>

  <div class="xrx-bind"                id="bscLastAnnotation"
       data-ref="xrx:instance('isc')/rdf:RDF/rdf:Description[last()]"></div>

  <!-- template model rect -->
  <div class="xrx-instance"            id="isct"
       data-resource="./client/sc.template.rdf"></div>

  <div class="xrx-bind"                id="bsctOriginRect"
       data-ref="xrx:instance('isct')/rdf:RDF/rdf:Description[1]"></div>

  <div class="xrx-bind"                id="bsctRectAbout"
       data-ref="xrx:bind('bsctOriginRect')/@rdf:about"></div>

  <div class="xrx-bind"                id="bsctRectAnnotatedAt"
       data-ref="xrx:bind('bsctOriginRect')/oa:annotatedAt"></div>

  <div class="xrx-bind"                id="bsctRectSerializedAt"
       data-ref="xrx:bind('bsctOriginRect')/oa:serializedAt"></div>

  <div class="xrx-bind"                id="bsctRectSerializedBy"
       data-ref="xrx:bind('bsctOriginRect')/oa:serializedBy/@rdf:resource"></div>

  <div class="xrx-bind"                id="bsctRectHasSource"
       data-ref="xrx:bind('bsctOriginRect')/oa:hasTarget/oa:SpecificResource/oa:hasSource"></div>

  <div class="xrx-bind"                id="bsctRect"
       data-ref="xrx:instance('isct')//svg:rect"></div>

  <div class="xrx-bind"                id="bsctRectX"
       data-ref="xrx:bind('bsctRect')/@x"></div>

  <div class="xrx-bind"                id="bsctRectY"
       data-ref="xrx:bind('bsctRect')/@y"></div>

  <div class="xrx-bind"                id="bsctRectWidth"
       data-ref="xrx:bind('bsctRect')/@width"></div>

  <div class="xrx-bind"                id="bsctRectHeight"
       data-ref="xrx:bind('bsctRect')/@height"></div>

  <!-- template model polygon -->
  <div class="xrx-bind"                id="bsctOriginPolygon"
       data-ref="xrx:instance('isct')/rdf:RDF/rdf:Description[2]"></div>

  <div class="xrx-bind"                id="bsctPolygonAbout"
       data-ref="xrx:bind('bsctOriginPolygon')/@rdf:about"></div>

  <div class="xrx-bind"                id="bsctPolygonAnnotatedAt"
       data-ref="xrx:bind('bsctOriginPolygon')/oa:annotatedAt"></div>

  <div class="xrx-bind"                id="bsctPolygonSerializedAt"
       data-ref="xrx:bind('bsctOriginPolygon')/oa:serializedAt"></div>

  <div class="xrx-bind"                id="bsctPolygonSerializedBy"
       data-ref="xrx:bind('bsctOriginPolygon')/oa:serializedBy/@rdf:resource"></div>

  <div class="xrx-bind"                id="bsctPolygonHasSource"
       data-ref="xrx:bind('bsctOriginPolygon')/oa:hasTarget/oa:SpecificResource/oa:hasSource"></div>

  <div class="xrx-bind"                id="bsctPolygon"
       data-ref="xrx:instance('isct')//svg:polygon"></div>

  <div class="xrx-bind"                id="bsctPolygonCoords"
       data-ref="xrx:bind('bsctPolygon')/@points"></div>



  <!-- view -->
  <nav id="nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="./index.html">CodiLab</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="./index.html">Home</a></li>
          <li><a href="./CodiKOS.html">CodiKOS</a></li>
          <li class="active"><a href="./CodiAnn.html">CodiAnn</a></li>
          <li><a href="./CodiQ.html">CodiQ</a></li>
        </ul>
        <div class="navbar-form navbar-right xrx-auth" data-endpoint="https://api.github.com/user">
          <div class="form-group inputUser">
            <input type="text" placeholder="Email" class="form-control xrx-user">
            <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
          </div>
          <div class="form-group inputPassword">
            <input type="password" placeholder="Password" class="form-control xrx-password">
            <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
          </div>
          <div class="form-group">
            <button class="btn btn-default xrx-signin">Sign in</button>
            <button class="btn btn-default xrx-signout">Sign out</button>
          </div>
          <div class="form-group">
            <a class="btn btn-primary" href="./SignUp.html">Sign up &raquo;</a>
          </div>
          <div class="xrx-action" data-event="xrx-event-submit-error">
            <div class="xrx-classes-add" data-select=".inputUser" data-classes="has-error has-feedback"></div>
            <div class="xrx-classes-add" data-select=".inputPassword" data-classes="has-error has-feedback"></div>
          </div>
          <div class="xrx-action" data-event="xrx-event-submit-done">
            <div class="xrx-classes-remove" data-select=".inputUser" data-classes="has-error has-feedback"></div>
            <div class="xrx-classes-remove" data-select=".inputPassword" data-classes="has-error has-feedback"></div>
            <div class="xrx-send" data-submission="ssave"></div>
          </div>
        </div>
      </div><!--/.navbar-collapse -->
    </div>
  </nav>

  <!--*
   * Image Annotation Tool
   *-->
  <div class="container">
    <div class="starter-template">

      <!--*
       * Image Navigation
       *-->
      <form class="form-inline text-center">
        <div class="form-group">
          <button class="xrx-button btn btn-default form-control">
            <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
            <span>&#160;Previous</span>
            <span class="xrx-calculate" id="cisFirstImage" data-ref="xrx:bind('bappImagePos') = 1"></span>
            <span class="xrx-calculate" id="cisLastImage" data-ref=""></span>
            <span class="xrx-action" data-event="xrx-event-click" data-if-not="cisFirstImage">
              <span class="xrx-update">
                <span class="xrx-origin" data-bind="bappPreviousImage"></span>
                <span class="xrx-target" data-bind="bappActualImage"></span>
              </span>
            </span>
          </button>
        </div>
        <div class="form-group">
          <select class="xrx-select form-control" data-bind="bappActualImage" data-optgroup="ometsFiles"></select>
        </div>
        <div class="form-group">
          <button class="xrx-button btn btn-default form-control">
            <span>Next&#160;</span>
            <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
            <span class="xrx-action" data-event="xrx-event-click">
              <span class="xrx-update">
                <span class="xrx-origin" data-bind="bappNextImage"></span>
                <span class="xrx-target" data-bind="bappActualImage"></span>
              </span>
            </span>
          </button>
        </div>
      </form>

      <!--*
       * Viewer Functionality
       *-->

      <!--
       * Annotation Functionality
       *-->
      <div class="btn-group pull-right" role="group">
        <button class="xrx-button btn">
          <span>Pan</span>
          <span class="xrx-action" data-event="xrx-event-click">
            <span class="xrx-script" data-script="xrx.mvc.getComponent('dcanvas').setModeView();"></span>
          </span>
        </button>
        <button class="btn">Verify</button>
        <button class="xrx-button btn">
          <span>Modify</span>
          <span class="xrx-action" data-event="xrx-event-click">
            <span class="xrx-script" data-script="xrx.mvc.getComponent('dcanvas').setModeModify();"></span>
          </span>
        </button>
        <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          <span>Draw</span>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          <li>
            <a class="xrx-button" href="#">
              Draw Rectangle
              <span class="xrx-action" data-event="xrx-event-click">
                <span class="xrx-script" data-script="xrx.mvc.getComponent('dcanvas').setModeCreate('nManualRectangle');"></script>
              </span>
            </a>
          </li>
          <li>
            <a class="xrx-button" href="#">
              Draw Polygon
              <span class="xrx-action" data-event="xrx-event-click">
                <span class="xrx-script" data-script="xrx.mvc.getComponent('dcanvas').setModeCreate('nManualPolygon');"></script>
              </span>
            </a>
          </li>
        </ul>
        <button class="btn">Tag</button>
      </div>

      <!--*
       * Canvas
       *-->
      <div id="dcanvas" class="xrx-canvas">
        <div class="xrx-canvas-background-image" data-bind="bmetsActualImageUrl"
             data-zone-bottom="-125"></div>
        <div class="xrx-canvas-graphics">

          <div class="xrx-canvas-group"><!-- automatic Swati annotations -->
            <div class="xrx-repeat" data-bind="bswatiZone">
              <div class="xrx-shape-rect automatic-annotation"
                   data-unit="percentage"
                   data-modifiable="false"
                   data-ref="./self::*"
                   data-ref-x="./BX_Percentage/text()"
                   data-ref-y="./BY_Percentage/text()"
                   data-ref-width="./RelativeWidth_Percentage/text()"
                   data-ref-height="./RelativeHeight_Percentage/text()">
              </div>
            </div>
          </div>

          <!-- manual rectangles -->
          <div class="xrx-canvas-group" data-name="nManualRectangle">
            <div class="xrx-repeat" data-bind="bscRectangles">
              <div class="xrx-shape-rect manual-annotation"
                   data-ref="./self::*"
                   data-ref-x="./@x"
                   data-ref-y="./@y"
                   data-ref-width="./@width"
                   data-ref-height="./@height">
              </div>
            </div>
            <div class="xrx-shape-rect-create"
                 data-bind="bsctRect"
                 data-bind-x="bsctRectX"
                 data-bind-y="bsctRectY"
                 data-bind-width="bsctRectWidth"
                 data-bind-height="bsctRectHeight">
            </div>
            <div class="xrx-action" data-event="xrx-event-graphic-created">
              <div class="xrx-update">
                <div class="xrx-origin" data-calculate="cuuid"></div>
                <div class="xrx-target" data-bind="bsctRectAbout"></div>
              </div>
              <div class="xrx-update">
                <div class="xrx-origin" data-calculate="ccurrentDateTime"></div>
                <div class="xrx-target" data-bind="bsctRectAnnotatedAt"></div>
              </div>
              <div class="xrx-update">
                <div class="xrx-origin" data-bind="buri"></div>
                <div class="xrx-target" data-bind="bsctRectSerializedBy"></div>
              </div>
              <div class="xrx-update">
                <div class="xrx-origin" data-calculate="ccurrentDateTime"></div>
                <div class="xrx-target" data-bind="bsctRectSerializedAt"></div>
              </div>
              <div class="xrx-update">
                <div class="xrx-origin" data-bind="bmetsActualImageUrl"></div>
                <div class="xrx-target" data-bind="bsctRectHasSource"></div>
              </div>
              <div class="xrx-insert">
                <div class="xrx-origin" data-bind="bsctOriginRect"></div>
                <div class="xrx-target" data-bind="bscLastAnnotation"></div>
              </div>
            </div>
          </div>

          <!-- manual polygons -->
          <div class="xrx-canvas-group" data-name="nManualPolygon">
            <div class="xrx-repeat" data-bind="bscPolygons">
              <div class="xrx-shape-polygon manual-annotation"
                   data-ref="./self::*"
                   data-ref-coords="./@points">
              </div>
            </div>
            <div class="xrx-shape-polygon-create"
                 data-bind="bsctPolygon"
                 data-bind-coords="bsctPolygonCoords">
            </div>
            <div class="xrx-action" data-event="xrx-event-graphic-created">
              <div class="xrx-update">
                <div class="xrx-origin" data-calculate="cuuid"></div>
                <div class="xrx-target" data-bind="bsctPolygonAbout"></div>
              </div>
              <div class="xrx-update">
                <div class="xrx-origin" data-calculate="ccurrentDateTime"></div>
                <div class="xrx-target" data-bind="bsctPolygonAnnotatedAt"></div>
              </div>
              <div class="xrx-update">
                <div class="xrx-origin" data-bind="buri"></div>
                <div class="xrx-target" data-bind="bsctPolygonSerializedBy"></div>
              </div>
              <div class="xrx-update">
                <div class="xrx-origin" data-calculate="ccurrentDateTime"></div>
                <div class="xrx-target" data-bind="bsctPolygonSerializedAt"></div>
              </div>
              <div class="xrx-update">
                <div class="xrx-origin" data-bind="bmetsActualImageUrl"></div>
                <div class="xrx-target" data-bind="bsctPolygonHasSource"></div>
              </div>
              <div class="xrx-insert">
                <div class="xrx-origin" data-bind="bsctOriginPolygon"></div>
                <div class="xrx-target" data-bind="bscLastAnnotation"></div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="row" style="margin-top:100px;">
        <div class="col-xs-8 col-sm-4 col-md-6">
          <div>Polygon</div>
          <pre class="xrx-console" data-bind="bsctOriginPolygon"></pre>
        </div>
        <div class="col-xs-8 col-sm-4 col-md-6">
          <div>Rectangle</div>
          <pre class="xrx-console" data-bind="bsctOriginRect"></pre>
        </div>
      </div>

    </div> 
  </div><!-- /container -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script>
    var width = $('.container').width();
    $('.xrx-canvas').width(width);
    $('.xrx-canvas').height(width);
    xrx.install(function() {
      for (var i = 0; i < 10; i++) {
        xrx.mvc.getComponent('dcanvas').getDrawing().getViewbox().zoomOut();
      }
    });
  </script>
</body>
</html>